<!doctype html>
<html charset="utf-8" ng-app="feedApp">
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Sky feed</title>
  <link rel="stylesheet" href="https://sky.blackbaudcdn.net/skyux/1.19.1/css/sky-bundle.css" integrity="sha384-rCHAZzIqFLwC6z0rrDMyjB4UNDV5LX7dkYYVMNba0hMetsGOLkd0WXF7DZYjzWkh" crossorigin="anonymous">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <bb-navbar>
    <div class="container-fluid col-sm-12 col-md-8 col-md-offset-2 col-lg-8 col-lg-offset-2">
      <ul class="nav navbar-nav navbar-left">
        <li class="bb-navbar-active"><a href="">Feed</a></li>
        <li><a href="https://github.com/brianbianchi/angularjs-feed">Code</a></li>
        <li><a href="https://skyux.developer.blackbaud.com/">SKY UX</a></li>
      </ul>
    </div>
  </bb-navbar>
  
  <div class="container-fluid bb-page-content col-sm-12 col-md-8 col-md-offset-2 col-lg-8 col-lg-offset-2" ng-controller="FeedController as ctr">
    <h2>Feed</h2>
    <span>You are currently subscribed to {{ctr.subs.length}} pages</span>
    <ul class="list-unstyled">
      <li ng-repeat="sub in ctr.subs">
        <label>
          <span class="">{{sub.source}}</span>
          <input type="button" ng-click="ctr.removeFeed(sub)" value="remove">
        </label>
      </li>
    </ul>
    <form ng-submit="ctr.addFeed()">
      <input type="text" ng-model="ctr.feedUrl"  size="30"
      placeholder="add new rss feed url here">
      <input class="btn-primary" type="submit" value="add">
    </form>

    <br><br><hr><br>

    <div class="row-fluid" ng-repeat="page in ctr.pages">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title" data-toggle="collapse" data-target="#{{'e'+$index}}">
            <a href="{{page.feed.url}}">{{page.feed.title}}</a>
          </h3>
        </div>
        <div id="{{'e'+$index}}" class="collapse in">
          <div class="panel-body" ng-repeat="element in page.items">
            <p><a href="{{element.link}}">{{element.title}}</a>
              <!--<p class="text-left" ng-bind-html="element.description"></p>-->
              <br><span class="small">{{element.pubDate}}</span>
              <br><span class="small">Author: {{element.author}}</span></p>
            </div>
          </div>
        </div>
      </div>

      <script src="https://sky.blackbaudcdn.net/skyux/1.19.1/js/sky-bundle.min.js" integrity="sha384-TjOyf6+7MiWfLrlmRaaGb7AreBGYuTcHrzxNuGLiu2c8PLej39dD7S4zYnBH6tax" crossorigin="anonymous"></script>
      <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.1/angular-sanitize.min.js"></script>
      <script src="feed.js"></script>
    </body>
    </html>